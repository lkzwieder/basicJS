var $b;!function(d,w){var Basic=function(d,w){var _config={},_store={},_loaded=[],_defaultRoutes={controller:function(){console.log("no default controller")}},_routes=_defaultRoutes,_DependencyManager=function(e,t){var r={},n=[],a=[];t=t||{};var s=function(e,t,r,a){_utils.isEmptyArray(r)||r.forEach(function(e){n.indexOf(e)>-1&&r.slice(r.indexOf(e),1)}),_utils.isEmptyArray(r)?l(e,t,a):o(e,t,r,a)},o=function(e,t,n,a){r[t]||(r[t]={},r[t].url=e,r[t].pos=a,r[t].deps=n)},i=function(e){for(var t in r)if(r.hasOwnProperty(t)){var n=r[t],a=n.deps.indexOf(e);a>-1&&(r[t].deps.splice(a,1),r[t].deps.length||l(n.url,t,n.pos))}},l=function(e,t,r){var s={};s.name=t,s.url=e,s.pos=r,a.push(s),-1==n.indexOf(t)&&n.push(t),i(t)},u=function(e){var r=e,n=[];return t[e]&&(r=t[e].url||r,n=t[e].deps||n),{url:r,deps:n}},c=0;if(e.forEach(function(e){var t=u(e);s(t.url,e,t.deps,c),c+=1}),!_utils.isEmptyObject(r)&&(n.forEach(function(e){i(e)}),!_utils.isEmptyObject(r)))for(var f in r)t[f].deps.forEach(function(e){var t=u(e);s(t.url,e,t.deps)});return a},_Deferred=function(e){e=e||{verbose:!1,processOnFail:!1};var t,r,n=[],a=[],s=null,o=function(o,i,l){s--,o?n[l]=i[0]:(a[l]=i[0],e.processOnFail||(s=!1,n=[]),e.verbose&&console.log("The argument in the position number: "+l+" has failed")),s||(a.length&&(a=Array.prototype.slice.call(a),r.apply(null,a)),n.length&&(n=Array.prototype.slice.call(n),t.apply(null,n)))},i=function(e,t){t=Array.prototype.slice.call(t),e.apply(null,t)},l=function(e){return t=e,this},u=function(e){return t=e,this},c=function(e){return r=e,this};return{when:function(){for(var e=s=arguments.length;e--;)arguments[e].self.pos=e,arguments[e].self.resolve=function(){o(!0,arguments,this.pos)},arguments[e].self.reject=function(){o(!1,arguments,this.pos)};return{then:u,fail:c,done:l}},resolve:function(){i(t,arguments)},reject:function(){i(r,arguments)},promise:function(){return{done:l,fail:c,self:this}}}},_req=function(e,t,r){var n=function(){var e=d.createElement("script");return e.type="text/javascript",e.charset="utf-8",e.async=!0,e},a=function(e,t){var r=new _Deferred,n=new XMLHttpRequest;return 0===t.indexOf("!")&&(t=t.substring(1,t.length)),n.onreadystatechange=function(){4==n.readyState&&200==n.status?(_store[e]||(_store[e]=n.responseText),r.resolve()):4==n.readyState&&200!=n.status&&r.reject("Error: "+t+" could not be loaded")},n.open("GET",t,!0),n.send(null),r.promise()},s=function(e,t){var r=new _Deferred;if(-1==_loaded.indexOf(e)){_loaded.push(e);var a=n();a.src=t;var s=_utils.shallowClone(w);a.addEventListener("load",function(n){var a=n.currentTarget,o=i(s,w,e,a,t);_utils.isEmptyArray(o)||o.forEach(function(e){-1==_config.allowedGlobals.indexOf(e)&&delete w[e]}),r.resolve(),a.parentNode.removeChild(a)}),a.addEventListener("error",function(t){var n=t.currentTarget;n.parentNode.removeChild(n),r.reject("Error: "+e+" could not be loaded")}),d.getElementsByTagName("head")[0].appendChild(a)}else var o=setInterval(function(){_store[e]&&(r.resolve(),clearInterval(o))},50);return r.promise()},o=function(e,t){return 0===e.indexOf("!")?a(e,t):s(e,t)},i=function(e,t,r,n,a){var s=[];t=_utils.shallowClone(t);for(var o in t)e[o]||-1==n.src.indexOf(a)||_utils.inObject(o,_store)||(_store[r]=t[o],s.push(o));return s},l=[];if(_utils.isEmptyArray(e))t(r);else{var u=new _DependencyManager(e,_config.paths);u.forEach(function(e){_utils.inObject(e.name,_store)||l.push(o(e.name,e.url))}),(new _Deferred).when.apply(null,l).then(function(){var n=[];e.forEach(function(e){n.push(_store[e])}),n.push(r),t&&t.apply(null,n)}).fail(function(e){console.log(e)})}},_def=function(e,t){return function(){_req(e,t,arguments)}},_setConfig=function(e){_config=e},_utils={isArray:function(e){return"[object Array]"==Object.prototype.toString.call(e)},isObject:function(e){return"[object Object]"==Object.prototype.toString.call(e)},isString:function(e){return"[object String]"==Object.prototype.toString.call(e)},isNumber:function(e){return"[object Number]"==Object.prototype.toString.call(e)},isFunction:function(e){return"[object Function]"==Object.prototype.toString.call(e)},isEmptyObject:function(e){return!Object.keys(e).length},isEmptyArray:function(e){return!e.length},objectLen:function(e){return Object.keys(e).length},inObject:function(e,t){var r=!1;for(var n in t)if(t.hasOwnProperty(n)){n==e&&(r=!0);break}return r},mergeObjects:function(){var e=Array.prototype.slice.call(arguments),t={};return e.forEach(function(e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])}),t},uniqueArray:function(e){var t=[];return e.forEach(function(e){-1==t.indexOf(e)&&t.push(e)}),t},shallowClone:function(e){var t={};for(var r in e)0!==r.indexOf("on")&&-1==["defaultstatus","defaultStatus","pageYOffset","scrollY","pageXOffset","scrollX","frameElement","opener","length","closed","status","name","TEMPORARY"].indexOf(r)&&(t[r]=e[r]);return t},capitalize:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},getCookie:function(e){for(var t=e+"=",r=d.cookie.split(";"),n=0;n<r.length;n++){for(var a=r[n];" "==a.charAt(0);)a=a.substring(1);if(-1!=a.indexOf(t))return a.substring(t.length,a.length)}return null},deleteCookie:function(e){d.cookie=e+"=;expires=Wed; 01 Jan 1970"},setCookie:function(e,t){d.cookie=e+"="+t+"; Path=/;"}},_Router=function(){var e=w.location.pathname,t=function(e){e=e||1,w.history.go(-1*e)},r=function(e,t){var r={};r[e]=t,history.pushState(r,e,t)},n=function(e){_routes=_utils.mergeObjects(_routes,e)},a=function(e){delete _routes[e]},s=function(){_routes=_defaultRoutes},o=function(){var t=!1;for(var r in _routes)if(_routes[r]){var n=r,a=_routes[r].params&&!_utils.isEmptyObject(_routes[r].params);if(a)for(var s in _routes[r].params)n=n.replace(s,"("+_routes[r].params[s]+")");var o=new RegExp("^"+n+"$"),i=e.match(o);if(i){var l=[];if(a)for(var u=_utils.objectLen(_routes[r].params),c=1;u>=c;c++)l.push(i[c]);if(!_utils.isEmptyArray(i)){_routes[r].controller.apply(null,l),t=!0;break}}}t||_routes["default"].controller()};return setInterval(function(){var t=w.location.pathname;if(e!=t){var r=new Event("urlChange");e=w.location.pathname,d.dispatchEvent(r)}},50),d.addEventListener("urlChange",function(){o()}),{run:o,navigate:r,back:t,addRoutes:n,delRoutes:a,flushRoutes:s}}(),_selectAll=function(e,t){return t=t||d,t.querySelectorAll(e)},_select=function(e,t){return t=t||d,t.querySelector(e)},_getFormElements=function(e){var t={};return["input","select","textarea"].forEach(function(r){for(var n=_selectAll(r,e),a=n.length,s=a;s--;)"select"==r&&(n[s].value=n[s].options[n[s].selectedIndex].value),t[n[s].name]=n[s].value}),t},_reloadEvents=function(e){if(!_utils.isEmptyObject(e))for(var t in e)for(var r=t.split(" ",2),n=_selectAll(r[1]),a=n.length,s=a;s--;)n[s].addEventListener(r[0],e[t])},_Controller=function(e){if(e.render=e.render||!1,e.events=e.events||{},e.reloadEvents=function(){_reloadEvents(e.events)},e.wait)var t=setInterval(function(){e.el=_select(e.el),e.el&&(_initializeController(e),clearInterval(t))},50);else e.el=_select(e.el),_initializeController(e)},_initializeController=function(e){e.initialize(),e.render&&e.render(),_reloadEvents(e.events)},_parser=function(){var _makeMap=function(e){for(var t={},r=e.split(","),n=r.length,a=0;n>a;a++)t[r[a]]=!0;return t},startTag=/^<([-A-Za-z0-9_]+)((?:\s+[a-zA-Z_:][-a-zA-Z0-9_:.]*(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,endTag=/^<\/([-A-Za-z0-9_]+)[^>]*>/,attr=/([a-zA-Z_:][-a-zA-Z0-9_:.]*)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/g,empty=_makeMap("area,base,basefont,br,col,frame,hr,img,input,link,meta,param,embed,command,keygen,source,track,wbr"),block=_makeMap("a,address,article,applet,aside,audio,blockquote,button,canvas,center,dd,del,dir,div,dl,dt,fieldset,figcaption,figure,footer,form,frameset,h1,h2,h3,h4,h5,h6,header,hgroup,hr,iframe,ins,isindex,li,map,menu,noframes,noscript,object,ol,option,output,p,pre,section,select,script,table,tbody,td,tfoot,th,thead,tr,ul,video"),inline=_makeMap("abbr,acronym,applet,b,basefont,bdo,big,br,cite,code,del,dfn,em,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,small,span,strike,strong,sub,sup,textarea,tt,u,var"),closeSelf=_makeMap("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr"),fillAttrs=_makeMap("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected"),special=_makeMap("script,style"),HTMLParser=function(e,t){function r(e,r,a,s){if(r=r.toLowerCase(),block[r])for(;i.last()&&inline[i.last()];)n("",i.last());if(closeSelf[r]&&i.last()==r&&n("",r),s=empty[r]||!!s,s||i.push(r),t.start){var o=[];a.replace(attr,function(e,t){var r=arguments[2]?arguments[2]:arguments[3]?arguments[3]:arguments[4]?arguments[4]:fillAttrs[t]?t:"";o.push({name:t,value:r,escaped:r.replace(/(^|[^\\])"/g,'$1\\"')})}),t.start&&t.start(r,o,s)}}function n(e,r){if(r)for(var n=i.length-1;n>=0&&i[n]!=r;n--);else var n=0;if(n>=0){for(var a=i.length-1;a>=n;a--)t.end&&t.end(i[a]);i.length=n}}var a,s,o,i=[],l=e;for(i.last=function(){return this[this.length-1]};e;){if(s=!0,i.last()&&special[i.last()])e=e.replace(new RegExp("([\\s\\S]*?)</"+i.last()+"[^>]*>"),function(e,r){return r=r.replace(/<!--([\s\S]*?)-->|<!\[CDATA\[([\s\S]*?)]]>/g,"$1$2"),t.chars&&t.chars(r),""}),n("",i.last());else if(0==e.indexOf("<!--")?(a=e.indexOf("-->"),a>=0&&(t.comment&&t.comment(e.substring(4,a)),e=e.substring(a+3),s=!1)):0==e.indexOf("</")?(o=e.match(endTag),o&&(e=e.substring(o[0].length),o[0].replace(endTag,n),s=!1)):0==e.indexOf("<")&&(o=e.match(startTag),o&&(e=e.substring(o[0].length),o[0].replace(startTag,r),s=!1)),s){a=e.indexOf("<");var u=0>a?e:e.substring(0,a);e=0>a?"":e.substring(a),t.chars&&t.chars(u)}if(e==l)throw"Parse Error: "+e;l=e}n()},_html2json=function(e){var t=_makeMap("a, abbr,acronym,applet,basefont,bdo,big,button,br,cite,code,del,dfn,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,small,strike,strong,sub,sup,textarea,tt,u,var");t.textarea=!1,t.input=!1,t.img=!1,t.a=!1,t.button=!1,e=e.replace(/<!DOCTYPE[\s\S]+?>/,"");var r=[],n={},a=[];return r.last=function(){return this[this.length-1]},HTMLParser(e,{start:function(e,n,s){var o=n.length;if(t[e]){for(var i="",l=0;o>l;l++)i+=" "+n[l].name+'="'+n[l].value+'"';a.push("<"+e+i+">")}else{var u={};if(u.tag=e,0!==o){for(var c={},l=0;o>l;l++){var f=n[l].name,p=n[l].value;"class"===f&&(p=p.split(" ")),c[f]=p}u.attr=c}if(s){var d=r.last();d.child instanceof Array||(d.child=[]),d.child.push(u)}else r.push(u)}},end:function(e){if(t[e]){var s=r.last();a.push("</"+e+">"),s.text||(s.text=""),s.text+=a.join(""),a=[]}else{var o=r.pop();if(0===r.length)return n=o;var s=r.last();s.child instanceof Array||(s.child=[]),s.child.push(o)}},chars:function(e){if(0!==a.length)a.push(e);else{var t=r.last();t&&(t.text||(t.text=""),t.text+=e)}},comment:function(e){}}),n},_json2html=function(e){var t=e.tag,r=e.text,n=e.child,a=[],s=_makeMap("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed"),o=function(e){for(var t in e)a.push(" "+t+'="'),e[t]instanceof Array?a.push(e[t].join(" ")):a.push(e[t]),a.push('"')};if(a.push("<"),a.push(t),e.attr?a.push(o(e.attr)):null,s[t]&&a.push("/"),a.push(">"),r?a.push(r):null,n)for(var i=0;i<n.length;i++)a.push(_json2html(n[i]));return s[t]||a.push("</"+t+">"),a.join("")},_attrExtensions=[],_applyAttrs=function(e,t){if(e.attr)for(var r in e.attr)_attrExtensions.forEach(function(n){var a=r.replace("-","_");_utils.inObject(a,n)&&(e=n[a](e,t))});return e},_replace=function(value,str,keyName){var matches=str.match(/{{\s*[\w\.]+\s*}}/g),toReplace=[];return matches&&(toReplace=matches.map(function(e){return e.match(/[\w\.]+/)[0]})),toReplace.forEach(function(v){str=str.replace("{{"+v+"}}",0===v.indexOf(keyName)?eval(v.replace(keyName+".","value.")):_findValue(v,value))}),str},_findValue=function(e,t){var r="",n=e.split("."),a=0;return n.forEach(function(e){r=a?r[e]:t[e],a++}),r},_process=function(e,t){if(e=_applyAttrs(e,t)){if(e.text&&(e.text=_replace(t,e.text)),e.attr)for(var r in e.attr)_utils.isArray(e.attr[r])?e.attr[r].forEach(function(n,a){e.attr[r][a]=_replace(t,n)}):e.attr[r]=_replace(t,e.attr[r]);if(e.child)for(var n=0;n<e.child.length;n++){var a=_process(e.child[n],t);a?e.child[n]=a:e.child.splice(n,1)}}return e},_htmlProcess=function(e,t){var r=_html2json(e);return _json2html(_process(r,t))};return{process:_htmlProcess,replace:_replace,attrExtensions:_attrExtensions}}();return{DependencyManager:_DependencyManager,Deferred:_Deferred,Controller:_Controller,req:_req,def:_def,setConfig:_setConfig,process:_parser.process,vdom:_parser,Router:_Router,utils:_utils,select:_select,selectAll:_selectAll,getFormElements:_getFormElements,controllers:{},store:_store}};$b=new Basic(d,w);for(var mains=d.getElementsByTagName("script"),len=mains.length,main,i=len;i--;)if(main=mains[i].getAttribute("data-main")){$b.req([main]);break}}(document,window);